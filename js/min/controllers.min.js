var appControllers=angular.module("appControllers",["ngAnimate"]);appControllers.controller("SoundController",function(e,t){e.mic=!0,e.mySketch=function(n){var r,o,a=[],i=!1,l=!1,h=.3;n.preload=function(){},n.setup=function(){r=new t.AudioIn,r.start();var e=.9,a=1024;o=new t.FFT(e,a),o.setInput(r),n.createCanvas(n.windowWidth,.25*n.windowHeight),n.noStroke()},n.draw=function(){n.background(122,160,175);var e=o.analyze(),t=r.getLevel();t>h&&!i&&u(),n.noFill(),n.stroke(229,136,94),n.strokeWeight(3),n.beginShape();for(var a=0;a<e.length;a++)n.vertex(2*a,n.map(e[a],0,255,n.height,0));n.endShape();var l=o.waveform();n.noFill(),n.beginShape(),n.stroke(255),n.strokeWeight(1);for(var a=0;a<l.length;a++){var d=n.map(a,0,l.length,0,n.width),g=n.map(l[a],0,255,0,n.height);n.vertex(d,g)}n.endShape()};var u=function(){n.background(229,136,94),i=!0,e.analyzed=i;for(var t=0,r=2e4,h=25,u=0,d=0,g=0,p=[],s=t;r>s;s+=h)u=o.getEnergy(s),a.push({frequency:s,amplitude:u}),p.push([s,u]),s>=2e3&&5e3>=s&&u>d&&(d=u,g=s);e.peakFrequency=g,e.peakAmplitude=d,e.bass=Math.round(o.getEnergy("bass")),e.lowMid=Math.round(o.getEnergy("lowMid")),e.mid=Math.round(o.getEnergy("mid")),e.highMid=Math.round(o.getEnergy("highMid")),e.treble=Math.round(o.getEnergy("treble")),l?l=!1:e.$apply(),$("#highchart").highcharts({chart:{type:"spline",zoomType:"x",height:500},colors:["#E5885E","#0066FF","#00CCFF"],credits:{enabled:!1},title:{text:""},xAxis:{title:{text:"Frequency"}},yAxis:{title:{text:"Amplitude"},min:0,max:300,tickinterval:50},series:[{name:"Sound Capture",data:p}],exporting:{enabled:!0}})};e.resetSound=function(t){t&&n.saveJSON(a,"audio-spectrum.json",!0),e.analyzed="",i=!1},e.setMic=function(t){"mute"==t?(r.stop(),e.mic=!1):(r.start(),e.mic=!0)},e.triggerSound=function(){l=!0,u()}}}),appControllers.controller("AnotherController",function(){});